<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Document</title>
 <link rel="stylesheet" href="style.css">
 <link href="http://fonts.cdnfonts.com/css/sofia-pro" rel="stylesheet">
</head>

<body>
 <div class="form-cv">
  <div class="container-cv">
   <!-- This is content -->
   <div class="content">
    <h1>FREEMIND</h1>
    <p>Hãy gửi CV của bạn cho chúng tôi</p>
   </div>
   <!-- This is form  -->
   <form action="/action_page.php" target="_blank" method="post">

    <div class="name">
     <label for="name">Tên của bạn :</label>
     <input type="text" id="name" name="name" placeholder="Ví dụ : Nguyễn văn a" required>
    </div>
    
    <div class="phone">
     <label for="phone">Số điện thoại :</label>
     <input type="tel" id="phone" name="phone" placeholder="số điện thoại liên lạc"  required>
    </div>
    
    <div class="position">
     <label for="position">Chức vụ :</label>
     <select name="position" id="cars">
      <option value="junior">Junior Ecommerce Web Developer</option>
      <option value="developer">Dev Ecommerce Web Developer</option>
      <option value="senior">Senior Ecommerce Web Developer</option>
     </select>
    </div>

    <div class="exp">
     <label for="exp">Kinh nghiệm làm việc :</label>
     <textarea type="text" id="exp" name="exp"></textarea>
    </div>

    <input type="file" id="img" name="img" accept="image/*">

    <div class="email">
     <label for="lname">Email :</label>
     <input type="email" id="email" name="email" placeholder="Ex:contact@dfgmail.com"  required>
    </div>

    <div class="submit">
     <button type="submit">Gửi CV cho FREEMIND</button>
    </div>
  </form>
  </div>
 </div>
</body>
<script>

  

 const url = "https://freemind-test.netlify.app/.netlify/functions/test";
 const formEl = document.querySelector("form");
 formEl.addEventListener("submit", async (e) => {
   e.preventDefault();
   const formData = new FormData(formEl);
   const formDataSerialized = Object.fromEntries(formData);
   const jsonObject = {
     ...formDataSerialized,
   };
   try {
     const response = await fetch(url, {
       method: "POST",
       body: JSON.stringify(jsonObject),
       headers: {
         "Content-Type": "application/json",
       },
     });
     const json = await response.json();
     console.log(json);
   } catch (e) {
     console.error(e);
     alert("there as an error");
   }
 });
</script>
</html>